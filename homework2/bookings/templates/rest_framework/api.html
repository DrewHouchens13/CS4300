{% extends "rest_framework/base.html" %}

{% block branding %}
    <a class='navbar-brand' rel="nofollow" href='/api/'>
        🎬 Movie Theater API
    </a>
{% endblock %}

{% block userlinks %}
    {{ block.super }}
    <li class="nav-item">
        <a class="nav-link btn btn-success btn-sm text-white" href="{% url 'movie_list_page' %}" style="margin-left: 10px;">
            🏠 Back to Main Site
        </a>
    </li>
{% endblock %}

{% block content %}
    {{ block.super }}
    
    {# Add movie links section if this is the movie list view #}
    {% if movie_list %}
    <div style="margin-top: 40px; padding: 25px; background: linear-gradient(to bottom, #f8f9fa, #e9ecef); border: 2px solid #0d6efd; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
        <h3 style="margin-bottom: 20px; color: #0d6efd; border-bottom: 2px solid #0d6efd; padding-bottom: 10px;">
            🎬 Quick Access to Individual Movies
        </h3>
        <p style="color: #495057; margin-bottom: 20px; font-size: 15px;">
            Click any movie below to view its details, update showtime, or delete it:
        </p>
        
        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 15px;">
            {% for movie in movie_list %}
                <a href="/api/movies/{{ movie.id }}/" 
                   class="btn btn-outline-primary" 
                   style="text-align: left; padding: 15px; font-size: 14px; border-width: 2px; transition: all 0.2s;">
                    <div style="font-weight: 600; font-size: 16px; margin-bottom: 5px;">
                        {{ movie.title }}
                    </div>
                    <div style="color: #6c757d; font-size: 12px;">
                        ID: {{ movie.id }} • 
                        {% if movie.showtime %}
                            🎬 {{ movie.showtime|date:"M d, g:i A" }}
                        {% else %}
                            No showtime set
                        {% endif %}
                    </div>
                </a>
            {% endfor %}
        </div>
        
        <div style="margin-top: 20px; padding: 15px; background-color: #fff3cd; border: 1px solid #ffc107; border-radius: 6px;">
            <strong>💡 Tip:</strong> Click any movie card above to access delete and update showtime actions
        </div>
    </div>
    {% endif %}
{% endblock %}

{% block footer %}
    <div class="container-fluid" style="padding: 30px 0; background-color: #f8f9fa; margin-top: 50px;">
        <div class="row">
            <div class="col-md-12 text-center">
                <h5>Quick Navigation</h5>
                <p>
                    <a href="/api/" class="btn btn-outline-primary btn-sm">📋 API Root</a>
                    <a href="/api/movies/" class="btn btn-outline-primary btn-sm">🎬 Movies List</a>
                    <a href="/api/seats/" class="btn btn-outline-primary btn-sm">💺 Seats List</a>
                    <a href="/api/bookings/" class="btn btn-outline-primary btn-sm">🎫 Bookings List</a>
                    <a href="{% url 'movie_list_page' %}" class="btn btn-success btn-sm">🏠 Main Site</a>
                </p>
            </div>
        </div>
    </div>
{% endblock %}
